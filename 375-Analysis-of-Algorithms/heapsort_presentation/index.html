<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Heapsort - Walkthrough and Analysis</title>
<!-- metadata -->
<meta name="generator" content="Presentacular_S5_scriptaculous" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20100922" />
<meta name="author" content="Peter Graham" />

<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />

<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>

<!-- Presentacular theme -->
<link rel="stylesheet" href="presentacular.css" type="text/css" />

<!-- prototype + scriptaculous -->
<script src="prototype/prototype.js" type="text/javascript"></script>
<script src="scriptaculous/scriptaculous.js" type="text/javascript"></script>
<!-- Presentaculous JS -->
<script src="presentacular.js" type="text/javascript"></script>




</head>
<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<!--div id="footer">


<h1>Presentacular</h1>
<h2>http://labs.cavorite.com/presentacular</h2>

</div-->

</div>


<div class="presentation">

<div class=slide>
<h1>Heapsort</h2>
 <h2>Walkthrough and Analysis</h2>

<div class=handout>
Hi everyone. I'm Peter Graham and today I'll be talking about HEAPSORT.

My goal is for all of you to understand by the end of this presentation 3 things:
1. how heapsort works
2. how to build your own heapsort
and 3. when are some good situations in which to use heapsort

SO, lets dive right in!
</div>
</div>

<div class="slide section">

<h1>What is heapsort?</h1>

<div class=handout>
So, what exactly is heap sort? Heap sort is an efficient sorting algorithm that, as the name suggests, uses heaps as it's underlying data structure.
</div>
</div>


<div class="slide section">
<h1>Why should you care?</h1>
<div class=handout>
There are tons of sorting algorithms out there. Why should you use heapsort over any of those other ones? Well, heap sort is actually a very beautiful algorithm.
</div>
</div>

<div class="slide">
<ul>
<li>Efficient
<li>Trustworthy
<li>Lower memory usage
</ul>

<div class=handout>
Here are some of the reasons that heap sort is good.
I'll go into each of these in more detail once we start analyzing heap sort, but first we have to learn how HS works
</div>
</div>


<div class="slide section">
<h1>Binary max-heap?</h1>

<div class=handout>
But before we can get there, you have to understand the underlying data structure that heap sort uses, called binary max-heaps.
So binary max heaps have a few properties that you should know about:
1. BINARY: each node has <= two child nodes.
2. MAX: each child node is <= parent
3. COMPLETE: every depth of the tree, except possibly the last, is completely filled up. It also means that all nodes are left-justified. 
</div>
</div>

<div class="slide">
<h1>What's wrong with this?</h1>
<img src="pix/wrongerheap.png">

<div class=handout>
So, quick POP QUIZ to refresh your memory: what is wrong with this? how can we make this a valid heap?
</div>
</div>

<div class=slide>
<h1>Must be complete</h1>
<img src="pix/wrongerheap2.png">
<div class=handout>
One correction you made was that the 2 was out of place, and you're right.
Heaps must be balanced, and that means that every node at depth n-2 and higher must have 2 child nodes.
</div>
</div>

<div class=slide>
<img src="pix/wrongheap.png">
<div class=handout>
So the second thing you mentioned is that the 20 was wrong, and you're right.
Heaps (max-heaps) have the property where the a child node must be less than or equal to it's parent.
</div>
</div>

<div class=slide>
<h1>Child &lt;= Parent</h1> 
<img src="pix/wrongheap2.png">
<div class=handout>
So for now, we'll replace the 20 with something that will work.
</div>
</div>

<div class=slide>
<img src="pix/okheap.png">
<div class=handout>
So this is our now corrected heap. So a heap states that each parent node should be larger or equal to it's child nodes. The root node is located at the top of the heap, (in this case, 15) and is the largest value.
</div>
</div>

<div class="slide section">
<h1>Store a heap in an array</h1>
</div>

<!--div class=slide>
<img src="pix/array1.png">
</div>

<div class=slide>
<h1>Child nodes of root</h1>
<img src="pix/array2.png">
</div>

<div class=slide>
<h1>Child nodes of parent 1</h1>
<img src="pix/array3.png">
</div>

<div class=slide>
<h1>Child nodes of parent 2</h1>
<img src="pix/array4.png">
</div-->

<div class=slide>
<img src="pix/arraydepth2.png">
</div>

<div class=slide>
<h1>Indexing formulas</h1>
<br>
<h2><span class=g>Left child index</span> = parent_index * 2 - 1</h2><br><br>
<h2><span class=r>Right child index</span> = <span class=g>left_child_index</span> + 1</h2>
</div>

<!--div class=slide>
<h1>Index of left child node</h1>
<img src="pix/arraydepth3.png">
</div>
<div class=slide>
<h1>Index of left child node</h1>
<img src="pix/arraydepth4.png">
</div>
<div class=slide>
<h1>Index of left child node</h1>
<img src="pix/arraydepth5.png">
</div-->

<div class="slide section">
<h1>How to build heapsort</h1>
<div class=handout>
We finally have all the background info necessary to build heap sort.
</div>
</div>

<div class=slide>
<h1>Heapsort steps</h1><br>
<h2 class=p><b>1. buildHeapFromArray</b></h2>
<h3>unsorted array &rarr; heap</h3>
<br><br>
<h2 class=b><b>2. buildSortedArrayFromHeap</b></h2>
<h3>heap &rarr; sorted array</h3>
</div>

<div class=slide>
<img src="pix/restoreheap.png">
</div>

<div class=slide>
<h2><b class=g>restoreHeap</b> asks two questions:</h2><br>
<ol>
<li>Which child node (value) is larger?
<li>Is larger child <= parent?
</ol>
</div>

<!--div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap1.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap2.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap3.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap4.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap5.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap6.png">
</div>

<div class=slide>
<h1>Heapsort example</h1>
<img src="pix/heap7.png">
</div-->


<div class="slide section">
<h1>Time Complexity</h1>
</div>

<div class=slide>
<h1>Primitive operation: comparisons</h1><br>
<ul class=invis>
<li><em>isSmaller</em> function compares array elements
</ul>
</div>

<div class=slide>
<h1>restoreHeap: worst case</h1>
<img src="pix/worst1.png">
</div>

<div class=slide>
<h1>restoreHeap: worst case</h1>
<img src="pix/worst2.png">
</div>

<div class=slide>
<h1>restoreHeap: worst case</h1>
<img src="pix/worst3.png">
</div>

<div class=slide>
<ul class=invis>
<li>The depth of a complete tree of n nodes is  <span class=r>log<sub>2</sub>(n + 1)</span>  <sup>[1]</sup>
</ul><br><br>
<sup>[1]</sup> <a href="http://www.dgp.toronto.edu/people/JamesStewart/378notes/09treeHeight/">See Proof</a>
</div>

<div class=slide>
<h1>restoreHeap</h1><br>
<ul class=invis>
<li><span class=r>two</span> comparisons per depth
<li>= O(<span class=r>2</span>*log n + 1)
<li>= <span class=g>O(log n)</span>
</ul>
</div>

<!--div class="slide section">
<h1>Best case time complexity</h1>
</div--
>
<div class=slide>
<h1>1. buildHeapFromArray</h1><br>
<ul class=invis>
<li>Calls restoreHeap <span class=r>(n - 2) / 2</span> times
<li>= <span class=r>((n - 2) / 2)</span> * <span class=g>O(log n)</span>
<li>= <span class=p>O(n log n)</span>
</ul>
</div>

<div class=slide>
<h1>2. buildSortedArrayFromHeap</h1><br>
<ul class=invis>
<li>Calls restoreHeap <span class=r>n-1</span> times
<li>= <span class=r>(n - 1)</span> * <span class=g>O(log n)</span>  
<li>= <span class=b>O(n log n)</span>
</ul>
</div>

<div class=slide>
<ul class=invis>
<li>= <span class=p>O(n log n)</span> + <span class=b>O(n log n)</span>
<li>worst case = O(n log n)
</ul>
</div>

<div class="slide section">
<h1>Space Complexity</h1>
</div>

<div class=slide>
<h1>Heapsort is <em>in-place</em></h1><br>
<ul class=invis>
<li>O(1) additional space complexity
</ul>
<div class=handout>
By in-place, I mean that heapsort is able to do all the sorting only using the array given as the input. In other words, it doesn't need to create another array to store the sorted values. This means that it only needs enough space to hold the array.
</div>


<div class="slide section">
<h1>When to use heapsort</h1>
<div class=handout>
- when consistent and efficient performance is needed
- Low memory constraints
- relatively easy implementation
</div>
</div>

<!--div class="slide section">
<h1>When <em>not</em> to use it</h1>
<div class=handout>
- Parallel processing
- the relative order of equal elements in an array must stay the same. this is called stable sorting
</div>
</div-->

<div class="slide section">
<h1 class="appear">Questions?</h1>
</div>

</div>

</body>
</html>
