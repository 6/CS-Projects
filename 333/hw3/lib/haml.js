/* Source: https://github.com/uglyog/clientside-haml-js */
var root=this;root.haml={compileHaml:function(a){if(haml.cache&&haml.cache[a]){return haml.cache[a]}var b=this.compileHamlToJs(new haml.Tokeniser({templateId:a}));var c=null;try{c=new Function("context",b)}catch(d){throw"Incorrect embedded JS code has resulted in an invalid Haml function - "+d+"\nGenerated Function:\n"+b}if(!haml.cache){haml.cache={}}haml.cache[a]=c;return c},compileHamlToJs:function(a){var b=new haml.Buffer;var c=[];var d="  var html = [];\n";d+="  var hashFunction = null, hashObject = null, objRef = null, objRefFn = null;\n  with (context) {\n";a.getNextToken();while(!a.token.eof){if(!a.token.eol){var e=haml.whitespace(a);if(a.token.exclamation){haml.ignoredLine(a,e,c,b)}else if(a.token.equal||a.token.escapeHtml||a.token.unescapeHtml||a.token.tilde){haml.embeddedJs(a,e,c,b,{innerWhitespace:true})}else if(a.token.minus){haml.jsLine(a,e,c,b)}else if(a.token.comment||a.token.slash){haml.commentLine(a,e,c,b)}else if(a.token.amp){haml.escapedLine(a,e,c,b)}else{haml.templateLine(a,c,b,e)}}else{a.getNextToken()}}haml.closeElements(0,c,b,a);b.flush();d+=b.output();d+='  }\n  return html.join("");\n';return d},commentLine:function(a,b,c,d){if(a.token.comment){a.skipToEOLorEOF()}else if(a.token.slash){haml.closeElements(b,c,d,a);d.append(haml.indentText(b));d.append("<!--");var e=a.skipToEOLorEOF();if(e&&e.length>0){d.append(e)}if(e&&_(e).startsWith("[")&&e.match(/\]\s*$/)){c[b]={htmlConditionalComment:true};d.append(">")}else{c[b]={htmlComment:true}}if(haml.tagHasContents(b,a)){d.append("\\n")}}},escapedLine:function(a,b,c,d){if(a.token.amp){haml.closeElements(b,c,d,a);d.append(haml.indentText(b));var e=a.skipToEOLorEOF();if(e&&e.length>0){d.append(_(e).escapeHTML())}d.append("\\n")}},ignoredLine:function(a,b,c,d){if(a.token.exclamation){a.getNextToken();if(a.token.ws){b+=haml.whitespace(a)}a.pushBackToken();haml.closeElements(b,c,d,a);var e=a.skipToEOLorEOF();d.append(haml.indentText(b)+e+"\\n")}},embeddedJs:function(a,b,c,d,e){if(c){haml.closeElements(b,c,d,a)}if(a.token.equal||a.token.escapeHtml||a.token.unescapeHtml||a.token.tilde){var f=a.token.escapeHtml||a.token.equal;var g=a.token.tilde;var h=a.currentParsePoint();var i=a.skipToEOLorEOF();var j=haml.indentText(b);if(!e||e.innerWhitespace){d.append(j)}d.flush();d.appendToOutputBuffer(j+"try {\n");d.appendToOutputBuffer(j+'    var value = eval("'+i.replace(/"/g,'\\"').replace(/\\n/g,"\\\\n")+'");\n');d.appendToOutputBuffer(j+'    value = value === null ? "" : value;');if(f){d.appendToOutputBuffer(j+"    html.push(_(String(value)).escapeHTML());\n")}else if(g){d.appendToOutputBuffer(j+"    html.push(haml.perserveWhitespace(String(value)));\n")}else{d.appendToOutputBuffer(j+"    html.push(String(value));\n")}d.appendToOutputBuffer(j+"} catch (e) {\n");d.appendToOutputBuffer(j+"  throw new Error(haml.templateError("+h.lineNumber+", "+h.characterNumber+', "'+haml.escapeJs(h.currentLine)+'",\n');d.appendToOutputBuffer(j+'    "Error evaluating expression - " + e));\n');d.appendToOutputBuffer(j+"}\n");if(!e||e.innerWhitespace){d.append("\\n")}}},jsLine:function(a,b,c,d){if(a.token.minus){haml.closeElements(b,c,d,a);d.flush();d.appendToOutputBuffer(haml.indentText(b));var e=a.skipToEOLorEOF();d.appendToOutputBuffer(e);d.appendToOutputBuffer("\n");if(e.match(/function\s\((,?\s*\w+)*\)\s*\{\s*$/)){c[b]={fnBlock:true}}else if(e.match(/\{\s*$/)){c[b]={block:true}}}},templateLine:function(a,b,c,d){if(!a.token.eol){haml.closeElements(d,b,c,a)}var e=haml.element(a);var f=haml.idSelector(a);var g=haml.classSelector(a);var h=haml.objectReference(a);var i=haml.attributeList(a);var j=a.currentParsePoint();var k=haml.attributeHash(a);var l={selfClosingTag:false,innerWhitespace:true,outerWhitespace:true};if(a.token.slash){l.selfClosingTag=true;a.getNextToken()}if(a.token.gt&&haml.lineHasElement(e,f,g)){l.outerWhitespace=false;a.getNextToken()}if(a.token.lt&&haml.lineHasElement(e,f,g)){l.innerWhitespace=false;a.getNextToken()}if(haml.lineHasElement(e,f,g)){if(!l.selfClosingTag){l.selfClosingTag=haml.isSelfClosingTag(e)&&!haml.tagHasContents(d,a)}haml.openElement(j,d,e,f,g,h,i,k,b,c,l)}else if(!haml.isEolOrEof(a)&&!a.token.ws){a.pushBackToken()}var m=haml.elementContents(a,d+1,c,l);haml.eolOrEof(a);if(l.selfClosingTag&&m.length>0){throw haml.templateError(j.lineNumber,j.characterNumber,j.currentLine,"A self-closing tag can not have any contents")}else if(m.length>0){if(m.match(/^\\%/)){m=m.substring(1)}if(l.innerWhitespace&&haml.lineHasElement(e,f,g)||!haml.lineHasElement(e,f,g)&&haml.parentInnerWhitespace(b,d)){var n=d;if(e.length>0){n+=1}c.append(haml.indentText(n)+m+"\\n")}else{c.append(_(m).trim()+"\\n")}}else if(!haml.lineHasElement(e,f,g)&&l.innerWhitespace){c.append(haml.indentText(d)+"\\n")}},elementContents:function(a,b,c,d){var e="";if(!a.token.eof){if(a.token.ws){a.getNextToken()}if(a.token.exclamation){e=a.skipToEOLorEOF()}else if(a.token.equal||a.token.escapeHtml||a.token.unescapeHtml){haml.embeddedJs(a,b,null,c,d)}else if(!a.token.eol){a.pushBackToken();e=a.skipToEOLorEOF()}}return e},attributeHash:function(a){var b="";if(a.token.attributeHash){b=a.token.tokenString;a.getNextToken()}return b},objectReference:function(a){var b="";if(a.token.objectReference){b=a.token.tokenString;a.getNextToken()}return b},attributeList:function(a){var b={};if(a.token.openBracket){a.getNextToken();while(!a.token.closeBracket){var c=haml.attribute(a);if(c){b[c.name]=c.value}else{a.getNextToken()}if(a.token.ws||a.token.eol){a.getNextToken()}else if(!a.token.closeBracket&&!a.token.identifier){throw a.parseError("Expecting either an attribute name to continue the attibutes or a closing "+"bracket to end")}}a.getNextToken()}return b},attribute:function(a){var b=null;if(a.token.identifier){var c=a.token.tokenString;a.getNextToken();haml.whitespace(a);if(!a.token.equal){throw a.parseError("Expected '=' after attribute name")}a.getNextToken();haml.whitespace(a);if(!a.token.string&&!a.token.identifier){throw a.parseError("Expected a quoted string or an identifier for the attribute value")}b={name:c,value:a.token.tokenString};a.getNextToken()}return b},closeElement:function(a,b,c,d){if(b[a]){if(b[a].htmlComment){c.append(haml.indentText(a)+"-->\\n")}else if(b[a].htmlConditionalComment){c.append(haml.indentText(a)+"<![endif]-->\\n")}else if(b[a].block){if(!d.token.minus||!d.matchToken(/\s*\}/g)){c.flush();c.appendToOutputBuffer(haml.indentText(a)+"}\n")}}else if(b[a].fnBlock){if(!d.token.minus||!d.matchToken(/\s*\}/g)){c.flush();c.appendToOutputBuffer(haml.indentText(a)+"});\n")}}else{var e=!b[a].tagOptions||b[a].tagOptions.innerWhitespace;if(e){c.append(haml.indentText(a))}else{c.trimWhitespace()}c.append("</"+b[a].tag+">");var f=!b[a].tagOptions||b[a].tagOptions.outerWhitespace;if(haml.parentInnerWhitespace(b,a)&&f){c.append("\\n")}}b[a]=null}},closeElements:function(a,b,c,d){for(var e=b.length-1;e>=a;e--){haml.closeElement(e,b,c,d)}},openElement:function(a,b,c,d,e,f,g,h,i,j,k){var l=c;if(l.length===0){l="div"}var m=haml.parentInnerWhitespace(i,b);var n=!k||k.outerWhitespace;if(!n){j.trimWhitespace()}if(b>0&&m&&n){j.append(haml.indentText(b))}j.append("<"+l);if(h.length>0||f.length>0){j.flush();if(h.length>0){h=this.replaceReservedWordsInHash(h);j.appendToOutputBuffer('    hashFunction = function () { return eval("hashObject = '+h.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"); };\n')}if(f.length>0){j.appendToOutputBuffer('    objRefFn = function () { return eval("objRef = '+f.replace(/"/g,'\\"')+'"); };\n')}j.appendToOutputBuffer('    html.push(haml.generateElementAttributes(context, "'+d+'", ["'+e.join('","')+'"], objRefFn, '+JSON.stringify(g)+", hashFunction, "+a.lineNumber+", "+a.characterNumber+', "'+haml.escapeJs(a.currentLine)+'"));\n')}else{j.append(haml.generateElementAttributes(null,d,e,null,g,null,a.lineNumber,a.characterNumber,a.currentLine))}if(k.selfClosingTag){j.append("/>");if(k.outerWhitespace){j.append("\\n")}}else{j.append(">");i[b]={tag:l,tagOptions:k};if(k.innerWhitespace){j.append("\\n")}}},replaceReservedWordsInHash:function(a){var b;b=a;_(["class","for"]).each(function(a){b=b.replace(a+":",'"'+a+'":')});return b},escapeJs:function(a){return a.replace(/"/g,'\\"')},combineAttributes:function(a,b,c){if(c){if(b==="id"&&c.toString().length>0){if(a&&a.id instanceof Array){a.id.unshift(c)}else if(a&&a.id){a.id=[a.id,c]}else if(a){a.id=c}else{a={id:c}}}else if(b==="for"&&c.toString().length>0){if(a&&a["for"]instanceof Array){a["for"].unshift(c)}else if(a&&a["for"]){a["for"]=[a["for"],c]}else if(a){a["for"]=c}else{a={"for":c}}}else if(b==="class"){var d=[];if(c instanceof Array){d=d.concat(c)}else{d.push(c)}if(a&&a["class"]){a["class"]=a["class"].concat(d)}else if(a){a["class"]=d}else{a={"class":d}}}else if(b!=="id"){if(!a){a={}}a[b]=c}}return a},isSelfClosingTag:function(a){return _(["meta","img","link","script","br","hr"]).contains(a)},tagHasContents:function(a,b){if(!haml.isEolOrEof(b)){return true}else{var c=b.lookAhead(1);return c.ws&&c.tokenString.length/2>a}},parentInnerWhitespace:function(a,b){return b===0||!a[b-1]||!a[b-1].tagOptions||a[b-1].tagOptions.innerWhitespace},lineHasElement:function(a,b,c){return a.length>0||b.length>0||c.length>0},generateElementAttributes:function(a,b,c,d,e,f,g,h,i){var j={};j=haml.combineAttributes(j,"id",b);if(c.length>0&&c[0].length>0){j=haml.combineAttributes(j,"class",c)}var k;if(e){for(k in e){if(e.hasOwnProperty(k)){j=haml.combineAttributes(j,k,e[k])}}}if(d){try{var l=d.call(this,a);if(l){var m=null;if(l.id){m=l.id}else if(l.get){m=l.get("id")}j=haml.combineAttributes(j,"id",m);var n=null;if(l["class"]){n=l["class"]}else if(l.get){n=l.get("class")}j=haml.combineAttributes(j,"class",n)}}catch(o){throw haml.templateError(g,h,i,"Error evaluating object reference - "+o)}}if(f){try{var p=f.call(this,a);if(p){for(k in p){if(p.hasOwnProperty(k)){if(k==="data"){var q=p[k];for(var r in q){if(q.hasOwnProperty(r)){j=haml.combineAttributes(j,"data-"+r,q[r])}}}else{j=haml.combineAttributes(j,k,p[k])}}}}}catch(s){throw haml.templateError(g,h,i,"Error evaluating attribute hash - "+s)}}var t="";if(j){for(k in j){if(j.hasOwnProperty(k)&&j[k]){if((k==="id"||k==="for")&&j[k]instanceof Array){t+=" "+k+'="'+_(j[k]).flatten().join("-")+'"'}else if(k==="class"&&j[k]instanceof Array){t+=" "+k+'="'+_(j[k]).flatten().join(" ")+'"'}else{t+=" "+k+'="'+haml.attrValue(k,j[k])+'"'}}}}return t},attrValue:function(a,b){if(_(["selected","checked","disabled"]).contains(a)){return a}else{return b}},indentText:function(a){var b="";for(var c=0;c<a;c++){b+="  "}return b},whitespace:function(a){var b=0;if(a.token.ws){b=a.token.tokenString.length/2;a.getNextToken()}return b},element:function(a){var b="";if(a.token.element){b=a.token.tokenString;a.getNextToken()}return b},eolOrEof:function(a){if(a.token.eol){a.getNextToken()}else if(!a.token.eof){throw a.parseError("Expected EOL or EOF")}},idSelector:function(a){var b="";if(a.token.idSelector){b=a.token.tokenString;a.getNextToken()}return b},classSelector:function(a){var b=[];while(a.token.classSelector){b.push(a.token.tokenString);a.getNextToken()}return b},templateError:function(a,b,c,d){var e=d+" at line "+a+" and character "+b+":\n"+c+"\n";for(var f=0;f<b-1;f++){e+="-"}e+="^";return e},isEolOrEof:function(a){return a.token.eol||a.token.eof},perserveWhitespace:function(a){var b=/<[a-zA-Z]+>[^<]*<\/[a-zA-Z]+>/g;var c="";var d=0;var e=b.exec(a);if(e){while(e){c+=a.substring(d,e.index);c+=e[0].replace(/\n/g,"&#x000A;");d=e.index+e[0].length;e=b.exec(a)}c+=a.substring(d)}else{c=a}return c},Tokeniser:function(a){this.buffer=null;this.bufferIndex=null;this.prevToken=null;this.token=null;if(a.templateId){var b=document.getElementById(a.templateId);if(b){this.buffer=b.innerHTML;this.bufferIndex=0}else{throw"Did not find a template with ID '"+a.templateId+"'"}}else if(a.template){this.buffer=a.template;this.bufferIndex=0}this.tokenMatchers={whitespace:/[ \t]+/g,element:/%[a-zA-Z][a-zA-Z0-9]*/g,idSelector:/#[a-zA-Z_\-][a-zA-Z0-9_\-]*/g,classSelector:/\.[a-zA-Z0-9_\-]+/g,identifier:/[a-zA-Z][a-zA-Z0-9\-]*/g,quotedString:/[\'][^\'\n]*[\']/g,quotedString2:/[\"][^\"\n]*[\"]/g,comment:/\-#/g,escapeHtml:/\&=/g,unescapeHtml:/\!=/g,objectReference:/\[[a-zA-Z_][a-zA-Z0-9_]*\]/g};this.matchToken=function(a){a.lastIndex=this.bufferIndex;var b=a.exec(this.buffer);if(b&&b.index===this.bufferIndex){return b[0]}return null};this.getNextToken=function(){if(isNaN(this.bufferIndex)){throw haml.templateError(this.lineNumber,this.characterNumber,this.currentLine,"An internal parser error has occurred in the HAML parser")}this.prevToken=this.token;this.token=null;if(this.buffer===null||this.buffer.length===this.bufferIndex){this.token={eof:true,token:"EOF"}}else{this.initLine();if(!this.token){var a=this.buffer.charCodeAt(this.bufferIndex);var b=this.buffer.charCodeAt(this.bufferIndex+1);if(a===10||a===13&&b===10){this.token={eol:true,token:"EOL"};if(a===13&&b===10){this.advanceCharsInBuffer(2);this.token.matched=String.fromCharCode(a)+String.fromCharCode(b)}else{this.advanceCharsInBuffer(1);this.token.matched=String.fromCharCode(a)}this.characterNumber=0;this.currentLine=this.getCurrentLine()}}if(!this.token){var c=this.matchToken(this.tokenMatchers.whitespace);if(c){this.token={ws:true,token:"WS",tokenString:c,matched:c};this.advanceCharsInBuffer(c.length)}}if(!this.token){var d=this.matchToken(this.tokenMatchers.element);if(d){this.token={element:true,token:"ELEMENT",tokenString:d.substring(1),matched:d};this.advanceCharsInBuffer(d.length)}}if(!this.token){var e=this.matchToken(this.tokenMatchers.idSelector);if(e){this.token={idSelector:true,token:"ID",tokenString:e.substring(1),matched:e};this.advanceCharsInBuffer(e.length)}}if(!this.token){var f=this.matchToken(this.tokenMatchers.classSelector);if(f){this.token={classSelector:true,token:"CLASS",tokenString:f.substring(1),matched:f};this.advanceCharsInBuffer(f.length)}}if(!this.token){var g=this.matchToken(this.tokenMatchers.identifier);if(g){this.token={identifier:true,token:"IDENTIFIER",tokenString:g,matched:g};this.advanceCharsInBuffer(g.length)}}if(!this.token){var h=this.matchToken(this.tokenMatchers.quotedString);if(!h){h=this.matchToken(this.tokenMatchers.quotedString2)}if(h){this.token={string:true,token:"STRING",tokenString:h.substring(1,h.length-1),matched:h};this.advanceCharsInBuffer(h.length)}}if(!this.token){var i=this.matchToken(this.tokenMatchers.comment);if(i){this.token={comment:true,token:"COMMENT",tokenString:i,matched:i};this.advanceCharsInBuffer(i.length)}}if(!this.token){var j=this.matchToken(this.tokenMatchers.escapeHtml);if(j){this.token={escapeHtml:true,token:"ESCAPEHTML",tokenString:j,matched:j};this.advanceCharsInBuffer(j.length)}}if(!this.token){var k=this.matchToken(this.tokenMatchers.unescapeHtml);if(k){this.token={unescapeHtml:true,token:"UNESCAPEHTML",tokenString:k,matched:k};this.advanceCharsInBuffer(k.length)}}if(!this.token){var l=this.matchToken(this.tokenMatchers.objectReference);if(l){this.token={objectReference:true,token:"OBJECTREFERENCE",tokenString:l.substring(1,l.length-1),matched:l};this.advanceCharsInBuffer(l.length)}}if(!this.token){if(this.buffer&&this.buffer.charAt(this.bufferIndex)==="{"){var m=this.bufferIndex+1;var n=this.characterNumber;var o=this.lineNumber;var p=1;while(m<this.buffer.length&&(p>1||this.buffer.charAt(m)!=="}")){if(this.buffer.charAt(m)==="{"){p++}else if(this.buffer.charAt(m)==="}"){p--}m++}if(m===this.buffer.length){this.characterNumber=n+1;this.lineNumber=o;throw this.parseError('Error parsing attribute hash - Did not find a terminating "}"')}else{this.token={attributeHash:true,token:"ATTRHASH",tokenString:this.buffer.substring(this.bufferIndex,m+1),matched:this.buffer.substring(this.bufferIndex,m+1)};this.advanceCharsInBuffer(m-this.bufferIndex+1)}}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="("){this.token={openBracket:true,token:"OPENBRACKET",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)===")"){this.token={closeBracket:true,token:"CLOSEBRACKET",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="="){this.token={equal:true,token:"EQUAL",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="/"){this.token={slash:true,token:"SLASH",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="!"){this.token={exclamation:true,token:"EXCLAMATION",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="-"){this.token={minus:true,token:"MINUS",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="&"){this.token={amp:true,token:"AMP",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="<"){this.token={lt:true,token:"LT",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)===">"){this.token={gt:true,token:"GT",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(!this.token){if(this.buffer.charAt(this.bufferIndex)==="~"){this.token={tilde:true,token:"TILDE",tokenString:this.buffer.charAt(this.bufferIndex),matched:this.buffer.charAt(this.bufferIndex)};this.advanceCharsInBuffer(1)}}if(this.token===null){this.token={unknown:true,token:"UNKNOWN"}}}return this.token};this.lookAhead=function(a){var b=null;if(a>0){var c=this.token;var d=this.prevToken;var e=this.currentLine;var f=this.lineNumber;var g=this.characterNumber;var h=this.bufferIndex;for(var i=0;i<a;i++){b=this.getNextToken()}this.token=c;this.prevToken=d;this.currentLine=e;this.lineNumber=f;this.characterNumber=g;this.bufferIndex=h}return b};this.initLine=function(){if(!this.currentLine&&this.currentLine!==""){this.currentLine=this.getCurrentLine();this.lineNumber=1;this.characterNumber=0}};this.currentLineMatcher=/[^\n]*/g;this.getCurrentLine=function(a){var b=a||0;this.currentLineMatcher.lastIndex=this.bufferIndex+b;var c=this.currentLineMatcher.exec(this.buffer);if(c){return c[0]}else{return""}};this.parseError=function(a){return haml.templateError(this.lineNumber,this.characterNumber,this.currentLine,a)};this.skipToEOLorEOF=function(){var a="";if(!this.token.eof&&!this.token.eol){this.currentLineMatcher.lastIndex=this.bufferIndex;var b=this.currentLineMatcher.exec(this.buffer);if(b&&b.index===this.bufferIndex){a=b[0];this.advanceCharsInBuffer(a.length);this.getNextToken()}}return a};this.advanceCharsInBuffer=function(a){for(var b=0;b<a;b++){var c=this.buffer.charCodeAt(this.bufferIndex+b);var d=this.buffer.charCodeAt(this.bufferIndex+b+1);if(c===13&&d===10){this.lineNumber++;this.characterNumber=0;this.currentLine=this.getCurrentLine(b);b++}else if(c===10){this.lineNumber++;this.characterNumber=0;this.currentLine=this.getCurrentLine(b)}else{this.characterNumber++}}this.bufferIndex+=a};this.currentParsePoint=function(){return{lineNumber:this.lineNumber,characterNumber:this.characterNumber,currentLine:this.currentLine}};this.pushBackToken=function(){if(!this.token.unknown){this.bufferIndex-=this.token.matched.length;this.token=this.prevToken}}},Buffer:function(){this.buffer="";this.outputBuffer="";this.append=function(a){if(a&&a.length>0){this.buffer+=a}};this.appendToOutputBuffer=function(a){if(a&&a.length>0){this.flush();this.outputBuffer+=a}};this.flush=function(){if(this.buffer&&this.buffer.length>0){this.outputBuffer+='    html.push("'+haml.escapeJs(this.buffer)+'");\n'}this.buffer=""};this.output=function(){return this.outputBuffer};this.trimWhitespace=function(){if(this.buffer.length>0){var a=this.buffer.length-1;while(a>0){var b=this.buffer.charAt(a);if(b===" "||b==="\t"||b==="\n"){a--}else if(a>1&&(b==="n"||b==="t")&&this.buffer.charAt(a-1)==="\\"){a-=2}else{break}}if(a>0&&a<this.buffer.length-1){this.buffer=this.buffer.substring(0,a+1)}else if(a===0){this.buffer=""}}}}}
